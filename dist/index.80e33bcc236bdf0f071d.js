(()=>{var e={393:()=>{document.addEventListener("DOMContentLoaded",()=>{const s=new e("https://693e775f12c964ee6b6d71d4.mockapi.io/api/v1/users");new t(s)});class e{constructor(e){this.apiUrl=e}async getUsers(e,t,s,r){console.log(r);try{const n=new URL(this.apiUrl);"all"!==t&&(e&&n.searchParams.append("page",e),t&&n.searchParams.append("limit",t)),(s=s||{}).search&&n.searchParams.append("search",s.search),s.role&&n.searchParams.append("role",s.role),s.status&&n.searchParams.append("status",s.status),r&&r.sortBy&&(n.searchParams.append("sortBy",r.sortBy),r.order&&n.searchParams.append("order",r.order));const a=await fetch(n.toString()),i=await a.json(),o=new URL(this.apiUrl);s.search&&o.searchParams.append("search",s.search),s.role&&o.searchParams.append("role",s.role),s.status&&o.searchParams.append("status",s.status);const d=await fetch(o.toString()),l=await d.json();return{users:i,totalCount:Array.isArray(l)?l.length:0}}catch(e){return console.error("Error fetching users:",e),{users:[],totalCount:0}}}async findUserById(e){try{const t=await fetch(`${this.apiUrl}/${e}`);return await t.json()}catch(e){return console.error("Error fetching user:",e),null}}async addUser(e){try{const t=await fetch(this.apiUrl,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)});return await t.json()}catch(e){console.error("Error adding user:",e)}}async updateUser(e,t){try{const s=await fetch(`${this.apiUrl}/${e}`,{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify(t)});return await s.json()}catch(e){console.error("Error updating user:",e)}}async deleteUser(e){try{return(await fetch(`${this.apiUrl}/${e}`,{method:"DELETE"})).ok}catch(e){return console.error("Error deleting user:",e),!1}}}class t{constructor(e){this.userService=e,this.displayedUsers=[],this.currentPage=1,this.itemsPerPage=5,this.totalUsers=0,this.isEditMode=!1,this.editingUserId=null,this.currentFilters={search:"",role:"",status:""},this.currentSort={sortBy:"createdAt",order:"asc"},this._initDOMElements(),this._initEventListeners(),this.displayUsers()}_initDOMElements(){this.extractBtn=document.getElementById("extract-btn"),this.perPage=document.getElementById("per-page"),this.sort=document.getElementById("sort"),this.searchInput=document.getElementById("search"),this.rolesFilter=document.getElementById("roles-filter"),this.statusFilter=document.getElementById("status-filter"),this.addUserBtn=document.getElementById("openFormBtn"),this.userModal=document.getElementById("userModal"),this.userForm=document.getElementById("userForm"),this.modalTitle=this.userModal.querySelector("h2"),this.submitButton=document.getElementById("submit"),this.closeFormBtn=document.getElementById("closeFormBtn"),this.cancelBtn=document.getElementById("cancelBtn"),this.userTableBody=document.querySelector("table tbody"),this.prevBtn=document.getElementById("prev-btn"),this.nextBtn=document.getElementById("next-btn"),this.pageButtonsContainer=document.getElementById("page-buttons-container"),this.paginationSummary=document.getElementById("pagination-summary")}_initEventListeners(){this.extractBtn.addEventListener("click",()=>this._extractSelectedUsers()),this.perPage.addEventListener("change",e=>this._ItemsPerPage(e)),this.sort.addEventListener("change",e=>this._handleSort(e)),this.searchInput.addEventListener("input",function(e){let t;return function(...s){clearTimeout(t),t=setTimeout(()=>{e.apply(this,s)},800)}}(e=>this._handleSearch(e))),this.rolesFilter.addEventListener("change",e=>this.RolesFilter(e)),this.statusFilter.addEventListener("change",e=>this.StatusFilter(e)),this.addUserBtn.addEventListener("click",()=>this.openModal("add")),this.closeFormBtn.addEventListener("click",()=>this.closeModal()),this.cancelBtn.addEventListener("click",()=>this.closeModal()),this.userModal.addEventListener("click",e=>{e.target===this.userModal&&this.closeModal()}),this.userForm.addEventListener("submit",e=>this.handleFormSubmit(e)),this.userTableBody.addEventListener("click",e=>this.handleTableClick(e)),this.prevBtn.addEventListener("click",()=>this.goToPrevPage()),this.nextBtn.addEventListener("click",()=>this.goToNextPage()),this.pageButtonsContainer.addEventListener("click",e=>this.handlePageNumberClick(e))}extractUsers(e){e.target.value}_handleSort(e){const t=e.target.value;console.log(t.split("_"));const[s,r]=t.split("_");this.currentSort={sortBy:s,order:r},this.currentPage=1,this.displayUsers()}_handleSearch(e){const t=e.target.value.trim();this.currentFilters.search=t,this.currentPage=1,this.displayUsers()}RolesFilter(e){this.currentFilters.role=e.target.value||"",this.currentPage=1,this.displayUsers()}StatusFilter(e){const t=e.target.value||"";this.currentFilters.status=t,console.log("Filter set to:",this.currentFilters.status),this.currentPage=1,this.displayUsers()}_ItemsPerPage(e){try{const t=e.target.value;console.log(t),this.itemsPerPage=t,this.currentPage=1,this.displayUsers()}catch(e){console.log(e)}}async openModal(e,t=null){if(this.isEditMode="edit"===e,this.editingUserId=t,this.userForm.reset(),this.isEditMode){this.modalTitle.textContent="Edit User",this.submitButton.textContent="Save Changes";const e=await this.userService.findUserById(t);e&&(document.getElementById("fullName").value=e.name,document.getElementById("email").value=e.email,document.getElementById("phone").value=e.phone,document.getElementById("role").value=e.role,document.getElementById("status-in-modal").value=e.status)}else this.modalTitle.textContent="Add New User",this.submitButton.textContent="Add User";this.userModal.classList.remove("hidden")}closeModal(){this.userModal.classList.add("hidden")}async displayUsers(){this.userTableBody.innerHTML='<tr><td colspan="9" class="text-center p-4">Loading...</td></tr>';const{users:e,totalCount:t}=await this.userService.getUsers(this.currentPage,this.itemsPerPage,this.currentFilters,this.currentSort);if(this.displayedUsers=e,this.totalUsers=t,0===e.length&&this.currentPage>1)this.goToPage(this.currentPage-1);else{if(0===e.length)return this.userTableBody.innerHTML='<tr><td colspan="9" class="text-center p-4">No users found.</td></tr>',void this.renderPagination();this.updateTable(e),this.renderPagination()}}updateTable(e){try{if(!e&&0===e.length)return void(this.userTableBody.innerHTML='<tr><td colspan="9" class="text-center p-4">No users found.</td></tr>');const t=e?.map(e=>{const t=!0===e.status,s=e.name.split(" ").map(e=>e[0]).join("").toUpperCase();return`\n        <tr class="hover:bg-gray-50 [&_tr:last-child]:border-0">\n          <td class="td">\n            <label class="check-container">\n              <input data-user-id="${e.id}" type="checkbox"  class="row-checkbox" />\n              <span class="checkbox"></span>\n            </label>\n          </td>\n          <td class="text-left p-4 text-sm font-light td">\n            <span class="relative flex size-10 shrink-0 overflow-hidden rounded-full w-8 h-8">\n              <span class="bg-[--muted] flex size-full items-center justify-center rounded-full">${s}</span>\n            </span>\n          </td>\n          <td class="td font-medium">${e.name}</td>\n          <td class="td text-gray-600">${e.email}</td>\n          <td class="td text-gray-600">${e.phone}</td>\n          <td class="td">\n            <span class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 gap-1 focus-visible:border-[--ring] focus-visible:ring-[#a1a1a1]/50 focus-visible:ring-[3px] transition-[color,box-shadow] overflow-hidden border-transparent bg-[--primary] text-[--primary-foreground] [a&]:hover:bg-[--primary]/90">\n              ${e.role.charAt(0).toUpperCase()+e.role.slice(1)}\n            </span>\n          </td>\n          <td class="td">\n            <div class="flex items-center space-x-2">\n              <label class="switch">\n                <input data-id="${e.id}" data-name="${e.name}"  class="switch-btn" type="checkbox" ${t?"checked":" "} />\n                <span class="slider round"></span>\n              </label>\n              <span class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 gap-1 focus-visible:border-[--ring] focus-visible:ring-[#a1a1a1]/50 focus-visible:ring-[3px] dark:aria-invalid:ring-[--destructive]/40 transition-[color,box-shadow] overflow-hidden border-transparent bg-[--primary] text-[--primary-foreground] [a&]:hover:bg-[--primary]/90">\n                ${t?"Active":"inactive"}\n              </span>\n            </div>\n          </td>\n          <td class="td text-gray-600">${e.createdAt}</td>\n          <td class="text-foreground h-10 px-2 align-middle font-medium whitespace-nowrap text-right">\n            <div class="flex items-center justify-end space-x-2">\n              <button class="edit-btn inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-[--ring] focus-visible:ring-[#a1a1a1]/50 focus-visible:ring-[3px] aria-invalid:border-[--destructive] hover:bg-[--accent] hover:text-[--accent-foreground] dark:hover:bg-[--accent]/50 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5" data-id="${e.id}">\n                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-square-pen w-4 h-4" aria-hidden="true">\n                  <path d="M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>\n                  <path d="M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"></path>\n                </svg>\n              </button>\n              <button class="delete-btn inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-[--ring] focus-visible:ring-[#a1a1a1]/50 focus-visible:ring-[3px] hover:bg-[--accent] hover:text-[--accent-foreground] dark:hover:bg-[--accent]/50 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5" data-id="${e.id}">\n                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trash2 lucide-trash-2 w-4 h-4 text-red-500" aria-hidden="true">\n                  <path d="M10 11v6"></path>\n                  <path d="M14 11v6"></path>\n                  <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"></path>\n                  <path d="M3 6h18"></path>\n                  <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>\n                </svg>\n              </button>\n            </div>\n          </td>\n        </tr>\n      `});this.userTableBody.innerHTML=t.join("")}catch(e){this.userTableBody.innerHTML='<tr><td colspan="9" class="text-center p-4">No users found.</td></tr>'}}handlePageNumberClick(e){const t=e.target.closest(".page-number-btn");if(t){const e=parseInt(t.dataset.page);this.goToPage(e)}}goToPrevPage(){this.currentPage>1&&this.goToPage(this.currentPage-1)}goToNextPage(){const e=Math.ceil(this.totalUsers/this.itemsPerPage);this.currentPage<e&&this.goToPage(this.currentPage+1)}goToPage(e){this.currentPage=e,this.displayUsers()}renderPagination(){const e=Math.ceil(this.totalUsers/this.itemsPerPage);this.pageButtonsContainer.innerHTML="";for(let t=1;t<=e;t++){const e=document.createElement("button");e.textContent=t,e.dataset.page=t,e.className="pagination-button page-number-btn "+(t===this.currentPage?"bg-gray-200":""),this.pageButtonsContainer.appendChild(e)}this.prevBtn.disabled=1===this.currentPage,this.nextBtn.disabled=this.currentPage===e||0===e;const t=(this.currentPage-1)*this.itemsPerPage+1||1,s=Math.min(t+this.itemsPerPage-1,this.totalUsers)||this.totalUsers;this.paginationSummary.textContent=`Showing ${this.totalUsers>0?t:0} â€“ ${s} of ${this.totalUsers} users`}async handleFormSubmit(e){e.preventDefault();const t=document.getElementById("status-in-modal").value;console.log(t);const s={name:document.getElementById("fullName").value,email:document.getElementById("email").value,phone:document.getElementById("phone").value,role:"Select a role"===document.getElementById("role").value?"user":document.getElementById("role").value,status:"true"===t};this.submitButton.disabled=!0,this.isEditMode?await this.userService.updateUser(this.editingUserId,s):(await this.userService.addUser(s),this.currentPage=Math.ceil((this.totalUsers+1)/this.itemsPerPage)),this.submitButton.disabled=!1,this.closeModal(),await this.displayUsers()}async handleTableClick(e){const t=e.target.closest(".edit-btn"),s=e.target.closest(".delete-btn"),r=e.target.closest(".switch-btn");if(t){const e=t.dataset.id;return void this.openModal("edit",e)}if(s){const e=s.dataset.id;return void(confirm("Are you sure you want to delete this user?")&&(await this.userService.deleteUser(e),await this.displayUsers()))}if(r){const e=r.dataset.id,t=r.checked,s=r.dataset.name;return void(confirm(`Are you sure you want to ${t?"Active":"Inactive"} ${s} ?`)?(await this.userService.updateUser(e,{status:t}),await this.displayUsers()):r.checked=!t)}}_extractSelectedUsers(){const e=document.querySelectorAll(".row-checkbox:checked");if(0===e.length)return void alert("Please select at least one user to extract.");const t=Array.from(e).map(e=>e.dataset.userId),s=this.displayedUsers.filter(e=>t.includes(e.id)).map(e=>({Name:e.name,Email:e.email,Phone:e.phone,Role:e.role,Status:e.status?"Active":"Inactive","Created At":new Date(e.createdAt).toLocaleString()})),r=XLSX.utils.json_to_sheet(s),n=XLSX.utils.book_new();XLSX.utils.book_append_sheet(n,r,"Users"),XLSX.writeFile(n,`Users-Export-${Date.now()}.xlsx`)}}}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,s),a.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";s(393)})()})();
//# sourceMappingURL=index.80e33bcc236bdf0f071d.js.map