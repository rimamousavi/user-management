(()=>{"use strict";document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("openFormBtn"),t=document.getElementById("closeFormBtn"),n=document.getElementById("cancelBtn"),s=document.getElementById("userModal"),a=document.getElementById("userForm");function i(){s.classList.add("hidden"),a.reset()}function r(){const e=JSON.parse(localStorage.getItem("users"))||[],t=document.querySelector("table tbody");t.innerHTML="",e.forEach(e=>{const n=`\n        <tr class="hover:bg-gray-50 [&_tr:last-child]:border-0">\n          <td class="td">\n            <label class="check-container">\n              <input type="checkbox" />\n              <span class="checkbox"></span>\n            </label>\n          </td>\n          <td class="text-left p-4 text-sm font-light td">\n            <span class="relative flex size-10 shrink-0 overflow-hidden rounded-full w-8 h-8">\n              <span class="bg-[--muted] flex size-full items-center justify-center rounded-full">${e.fullName.split(" ").map(e=>e[0]).join("")}</span>\n            </span>\n          </td>\n          <td class="td font-medium">${e.fullName}</td>\n          <td class="td text-gray-600">${e.email}</td>\n          <td class="td text-gray-600">${e.phone}</td>\n          <td class="td">\n            <span class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 gap-1 focus-visible:border-[--ring] focus-visible:ring-[#a1a1a1]/50 focus-visible:ring-[3px] transition-[color,box-shadow] overflow-hidden border-transparent bg-[--primary] text-[--primary-foreground] [a&]:hover:bg-[--primary]/90">\n              ${e.role.charAt(0).toUpperCase()+e.role.slice(1)}\n            </span>\n          </td>\n          <td class="td">\n            <div class="flex items-center space-x-2">\n              <label class="switch">\n                <input type="checkbox" checked />\n                <span class="slider round"></span>\n              </label>\n              <span class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 gap-1 focus-visible:border-[--ring] focus-visible:ring-[#a1a1a1]/50 focus-visible:ring-[3px] dark:aria-invalid:ring-[--destructive]/40 transition-[color,box-shadow] overflow-hidden border-transparent bg-[--primary] text-[--primary-foreground] [a&]:hover:bg-[--primary]/90">\n                Active\n              </span>\n            </div>\n          </td>\n          <td class="td text-gray-600">${e.lastLogin}</td>\n          <td class="text-foreground h-10 px-2 align-middle font-medium whitespace-nowrap text-right">\n            <div class="flex items-center justify-end space-x-2">\n              <button class="edit-btn inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-[--ring] focus-visible:ring-[#a1a1a1]/50 focus-visible:ring-[3px] aria-invalid:border-[--destructive] hover:bg-[--accent] hover:text-[--accent-foreground] dark:hover:bg-[--accent]/50 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5" data-id="${e.id}">\n                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-square-pen w-4 h-4" aria-hidden="true">\n                  <path d="M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>\n                  <path d="M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"></path>\n                </svg>\n              </button>\n              <button class="delete-btn inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-[--ring] focus-visible:ring-[#a1a1a1]/50 focus-visible:ring-[3px] hover:bg-[--accent] hover:text-[--accent-foreground] dark:hover:bg-[--accent]/50 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5" data-id="${e.id}">\n                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trash2 lucide-trash-2 w-4 h-4 text-red-500" aria-hidden="true">\n                  <path d="M10 11v6"></path>\n                  <path d="M14 11v6"></path>\n                  <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"></path>\n                  <path d="M3 6h18"></path>\n                  <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>\n                </svg>\n              </button>\n            </div>\n          </td>\n        </tr>\n      `;t.innerHTML+=n}),document.querySelectorAll(".delete-btn").forEach(e=>{e.addEventListener("click",function(){!function(e){if(confirm("آیا مطمئن هستید؟")){let t=JSON.parse(localStorage.getItem("users"))||[];t=t.filter(t=>t.id!==e),localStorage.setItem("users",JSON.stringify(t)),r()}}(parseInt(this.dataset.id))})}),function(){const e=JSON.parse(localStorage.getItem("users"))||[],t=document.querySelector("tfoot p");t&&(t.textContent=`Showing 0–${e.length} of ${e.length} users`)}()}e.addEventListener("click",function(){s.classList.remove("hidden")}),t.addEventListener("click",i),n.addEventListener("click",i),s.addEventListener("click",function(e){e.target===s&&i()}),a.addEventListener("submit",function(e){e.preventDefault();const t={id:Date.now(),fullName:document.getElementById("fullName").value,email:document.getElementById("email").value,phone:document.getElementById("phone").value,role:document.getElementById("role").value,status:"Active",lastLogin:(new Date).toLocaleString("fa-IR")};let n=JSON.parse(localStorage.getItem("users"))||[];n.push(t),localStorage.setItem("users",JSON.stringify(n)),console.log("User saved:",t),r(),i()}),r()})})();